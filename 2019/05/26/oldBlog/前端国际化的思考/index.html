<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=""><title>前端国际化的思考 | 叁歌</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.1.3"><link rel="stylesheet" type="text/css" href="/css/dark.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/normalize.css/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/clipboard/dist/clipboard.min.js"></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.js"></script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.css"><meta name="generator" content="Hexo 5.3.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">前端国际化的思考</h1><a id="logo" href="/.">叁歌</a><p class="description">To be the best of best.</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">前端国际化的思考</h1><div class="post-meta">2019-05-26<span> | </span><span class="category"><a href="/categories/%E6%97%A7%E5%8D%9A%E5%AE%A2/"> 旧博客  </a></span></div><div class="post-content"><h2 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h2><p>阅读本文，可以得到以下内容：</p>
<ol>
<li>前端国际化常见的做法及其优劣</li>
<li>工程化角度上如何解决国际化问题</li>
<li>一个 <code>vue-cli3</code> 版本的国际化思路</li>
</ol>
<p>转载请保留出处</p>
<h2 id="常见做法"><a href="#常见做法" class="headerlink" title="常见做法"></a>常见做法</h2><p>我们平时看到的国际化站点，大多都是使用一个公共函数，以需要翻译的文案为参数调用，然后在模板引擎渲染时，或者在 <code>js</code> 执行时依据一个目标语言的短语来确定语言包，然后以参数为 <code>key</code> 去做语言包的查找，最终返回相应的语言版本文案，比如以下伪代码：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--模板引擎--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123; &#x27;这是需要翻译的文案&#x27; | translate &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="comment">// 语言 flag</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> LANG_ENV = <span class="string">&#x27;en&#x27;</span></span></span><br><span class="line"><span class="javascript">    <span class="comment">// 语言包</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> langMap = &#123;</span></span><br><span class="line">        en : &#123;</span><br><span class="line"><span class="javascript">            <span class="string">&#x27;这是需要翻译的文案&#x27;</span> : <span class="string">&#x27;Need to be translated msg.&#x27;</span></span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="javascript">    <span class="comment">// 注册模板引擎翻译插件</span></span></span><br><span class="line">    TemplateEngine.registerPlugin(</span><br><span class="line"><span class="javascript">        <span class="string">&#x27;translate&#x27;</span>,</span></span><br><span class="line">        (val) =&gt; &#123;</span><br><span class="line"><span class="javascript">            <span class="keyword">return</span> langMap[LANG_ENV][val] || val</span></span><br><span class="line">        &#125;</span><br><span class="line">    )</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// js 执行时翻译</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 语言 flag</span></span><br><span class="line"><span class="keyword">const</span> LANG_ENV = <span class="string">&#x27;en&#x27;</span></span><br><span class="line"><span class="comment">// 语言包</span></span><br><span class="line"><span class="keyword">const</span> langMap = &#123;</span><br><span class="line">    en : &#123;</span><br><span class="line">        <span class="string">&#x27;这是需要翻译的文案&#x27;</span> : <span class="string">&#x27;Need to be translated msg.&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 翻译函数</span></span><br><span class="line"><span class="keyword">const</span> trans = <span class="function">(<span class="params">val, en = LANG_ENV</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> langMap[en][val] || val</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用</span></span><br><span class="line">$</span><br><span class="line">    .get(<span class="string">&#x27;/a.json&#x27;</span>)</span><br><span class="line">    .then(<span class="function"><span class="params">res</span> =&gt;</span> trans(res.msg))</span><br></pre></td></tr></table></figure>
<p>这种做法的好处就是比较容易理解，前置操作少，也比较好实施</p>
<p>当然也存在坏处，就是改动太多，想要加这样一个功能，需要将所有文案的地方全部包裹上相应的函数，前置的操作可能只是新建一些语言包文件，把插件引入，后续就是加公共函数，如果是老项目或者很大的项目的话，工作量更是不可估量</p>
<h2 id="工程化角度来看国际化问题"><a href="#工程化角度来看国际化问题" class="headerlink" title="工程化角度来看国际化问题"></a>工程化角度来看国际化问题</h2><p>其实我们结合现在的前端代码和工程化来看这个问题，现在编写好源码之后，通过打包工具打包之后，生成一个几乎是空（带一小部分 head 信息）的 <code>html</code> 模板，其他的逻辑都在 <code>js</code> 中，通过 <code>js</code> 向 <code>html</code> 注入结构代码</p>
<p>所以源码 =&gt; 发布代码的这个过程是会把源码拿来编译的，而编译时可以拿得到整个源码树的 <code>AST</code>, 每个单元都会有其不同的 <code>type</code>,<br>我们完全可以在这个过程中做文章，这就要用到 <code>babel</code></p>
<p><code>babel</code> 的主要过程为解析，转换，和输出</p>
<p><img src="https://raw.githubusercontent.com/amnhh/blog-images/master/2019-03/i18n1.png"></p>
<p>我们可以在转换的那一步，做国际化的实现。</p>
<p>比如拿出来一段代码：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;这段文案需要翻译&#x27;</span>)</span><br><span class="line"><span class="string">&#x27;这段文案需要翻译&#x27;</span></span><br></pre></td></tr></table></figure>
<p>我们可以将上面那些代码的AST取出来：</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;ExpressionStatement&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;start&quot;</span>: <span class="number">24</span>,</span><br><span class="line">    <span class="attr">&quot;end&quot;</span>: <span class="number">34</span>,</span><br><span class="line">    <span class="attr">&quot;loc&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;start&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;line&quot;</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="attr">&quot;column&quot;</span>: <span class="number">0</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">&quot;end&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;line&quot;</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="attr">&quot;column&quot;</span>: <span class="number">10</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">&quot;expression&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;Literal&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;start&quot;</span>: <span class="number">24</span>,</span><br><span class="line">        <span class="attr">&quot;end&quot;</span>: <span class="number">34</span>,</span><br><span class="line">        <span class="attr">&quot;loc&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;start&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">&quot;line&quot;</span>: <span class="number">2</span>,</span><br><span class="line">            <span class="attr">&quot;column&quot;</span>: <span class="number">0</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">&quot;end&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">&quot;line&quot;</span>: <span class="number">2</span>,</span><br><span class="line">            <span class="attr">&quot;column&quot;</span>: <span class="number">10</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">&quot;value&quot;</span>: <span class="string">&quot;这段文案需要翻译&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;rawValue&quot;</span>: <span class="string">&quot;这段文案需要翻译&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;raw&quot;</span>: <span class="string">&quot;&#x27;这段文案需要翻译&#x27;&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>因为 <code>babel</code> 的存在，我们可以在编译时获取这段 <code>AST</code>, 并在转换时，替换掉 <code>path.node.value</code> 的值：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> langMap = &#123;</span><br><span class="line">    en : &#123;</span><br><span class="line">        <span class="comment">// xxx...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="comment">// 访问者模式</span></span><br><span class="line">        visitor : &#123;</span><br><span class="line">            <span class="comment">// 文本节点的 type 统一为 Literal</span></span><br><span class="line">            Literal (path, state) &#123;</span><br><span class="line">              <span class="keyword">const</span> value = path.node.value</span><br><span class="line">              <span class="comment">// 文本节点里有中文，则拿去语言包里找</span></span><br><span class="line">              <span class="keyword">if</span> (<span class="regexp">/[\u4e00-\u9fa5]/</span>.test(value)) &#123;</span><br><span class="line">                  path.node.value = langMap[<span class="string">&#x27;en&#x27;</span>][path.node.value] || path.node.value</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样我们就可以在不改动代码，只添加语言包的情况下完成两者的转换</p>
<p>当然我们不能完全弃用以前的i18n方式，因为我们在编译期而非运行时去解决这个问题，是有弊端的</p>
<p>比如请求一个接口，返回数据为：</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;code&quot;</span> : <span class="number">500</span>,</span><br><span class="line">    <span class="attr">&quot;data&quot;</span> : &#123;</span><br><span class="line">        <span class="attr">&quot;msg&quot;</span> : <span class="string">&quot;这里是需要翻译的文案&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这种我们是没有办法的，还是得规规矩矩的再给语言方案一个公共的方法，上文也给出了伪代码</p>
<p>明确一点，我们是想要侵入性最小，而不是没有侵入性，所以运行时的，还是得使用老的办法2333</p>
<h2 id="一个-vue-cli3-国际化的实现"><a href="#一个-vue-cli3-国际化的实现" class="headerlink" title="一个 vue-cli3 国际化的实现"></a>一个 <code>vue-cli3</code> 国际化的实现</h2><p>因为部门的技术栈为 <code>vue</code> 全家桶，所以这里也提供一个 <code>vue-cli3</code> 的方法</p>
<p>这需要我们编写一个 <code>vue-cli3</code> 的插件，注册相应的命令：</p>
<h5 id="1-package-json-中添加-serve-插件地址"><a href="#1-package-json-中添加-serve-插件地址" class="headerlink" title="1. package.json 中添加 serve 插件地址"></a>1. package.json 中添加 serve 插件地址</h5><p>告诉 vue-cli-serve 引擎，我在 plugin/i18n/build-en.js 中，我写的插件逻辑</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&quot;vuePlugins&quot;: &#123;</span><br><span class="line">    &quot;service&quot;: [&quot;./plugins/i18n/build-en.js&quot;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="2-修改-scripts-中的-build-命令-新增-build-en-命令"><a href="#2-修改-scripts-中的-build-命令-新增-build-en-命令" class="headerlink" title="2. 修改 scripts 中的 build 命令, 新增 build:en 命令"></a>2. 修改 scripts 中的 build 命令, 新增 build:en 命令</h5><p>这里都新增了一个删除 node_modules/.cache 的行为，因为 vue-loader 默认添加 cache-loader，在我们编译的时候有可能会引起问题</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;build&quot;: &quot;rm -rf node_modules/.cache &amp;&amp; vue-cli-service build&quot;,</span><br><span class="line">    &quot;build:en&quot; : &quot;rm -rf node_modules/.cache &amp;&amp; vue-cli-service build:en&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="3-添加插件"><a href="#3-添加插件" class="headerlink" title="3. 添加插件"></a>3. 添加插件</h5><p>新建 <code>/plugins/i18n/build-en.js</code> 文件，写入：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> <span class="title">i18nPlugin</span> (<span class="params">api, projectOptions</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 注册命令</span></span><br><span class="line">    api.registerCommand(<span class="string">&#x27;build:en&#x27;</span>, &#123;&#125;, <span class="function"><span class="params">args</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> config = api.resolveWebpackConfig()</span><br><span class="line">        <span class="comment">// 设置产出目录为 dist/en</span></span><br><span class="line">        projectOptions.outputDir = <span class="string">`<span class="subst">$&#123;config.output.path&#125;</span>/en/`</span></span><br><span class="line"></span><br><span class="line">        <span class="built_in">global</span>.BUILD_LANGUAGE = <span class="string">&#x27;en&#x27;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// webpack babel-loader 配置中新增 babel 插件</span></span><br><span class="line">        api.configureWebpack(<span class="function"><span class="params">webpackConfig</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> rules = webpackConfig.module.rules</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 处理 /\.m?jsx?$/ 时</span></span><br><span class="line">            <span class="keyword">const</span> configBabelLoader = rules[rules.length - <span class="number">2</span>]</span><br><span class="line">            <span class="comment">// 给 babel loader 添加插件</span></span><br><span class="line">            configBabelLoader.use[configBabelLoader.use.length - <span class="number">1</span>].options = &#123;</span><br><span class="line">                plugins : [</span><br><span class="line">                    path.resolve(__dirname, <span class="string">&#x27;./babel-parser.js&#x27;</span>)</span><br><span class="line">                ]</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 新配置执行 build 命令</span></span><br><span class="line">        api.service.run(<span class="string">&#x27;build&#x27;</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置新注册插件模式为 production</span></span><br><span class="line"><span class="built_in">module</span>.exports.defaultModes = &#123;</span><br><span class="line">    <span class="string">&#x27;build:en&#x27;</span> : <span class="string">&#x27;production&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>其实写到这一步，我都以为大功告成了，然而出了问题：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>这是需要翻译的文案1<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; msg &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">module</span>.exports = &#123;</span></span><br><span class="line">        data () &#123;</span><br><span class="line"><span class="javascript">            <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">                msg : <span class="string">&#x27;这是需要翻译的文案2&#x27;</span></span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>在 <code>script</code> 中的文案被顺利转换，但是在 <code>template</code> 中的文案没有</p>
<p>因为 <code>.vue</code> 的文件由 <code>vue-loader</code> 解析，其中 <code>template</code> 部分并没有过 <code>babel</code> 解析器，所以我们需要修改 <code>vue-loader</code> 上的内容</p>
<p>将 <code>node_modules/vue-loader/lib/loaders/templateLoaders.js</code> 修改一下，<code>module.exports</code> 函数的 <code>const &#123; code &#125; = compiled</code> 之前，添加如下代码：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> PARSE_DIR = path.resolve(__dirname, <span class="string">&#x27;../../../../plugins&#x27;</span>, <span class="string">&#x27;i18n/babel-parser.js&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> _code = compiled.code</span><br><span class="line">compiled.code = <span class="built_in">require</span>(<span class="string">&#x27;@babel/core&#x27;</span>)</span><br><span class="line">    .transformSync(</span><br><span class="line">        _code,</span><br><span class="line">        &#123;</span><br><span class="line">            plugins : [PARSE_DIR]</span><br><span class="line">        &#125;</span><br><span class="line">    )</span><br><span class="line">    .code</span><br></pre></td></tr></table></figure>
<p>因为涉及到改 <code>node_modules</code> 中的东西，可以 <code>npm install</code> 之后手动修改，或者可以把 <code>vue-loader</code> 部署到私有库中从私有库中拉取，两种方式都阔以</p>
<p>此时执行编译：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">npm run build</span><br><span class="line">npm run build:en</span><br></pre></td></tr></table></figure>
<p>等待 <code>build</code> 完成后，我们发现 <code>dist</code> 的目录结构为：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">dist 目录</span><br><span class="line">├── css                                     ----- 中文版样式</span><br><span class="line">│   ├── app.6346a619.css</span><br><span class="line">│   └── chunk-vendors.fcfb82ac.css</span><br><span class="line">├── en                                      ----- 英文版主目录</span><br><span class="line">│   ├── css                                 ----- 英文版样式</span><br><span class="line">│   │   ├── app.6346a619.css</span><br><span class="line">│   │   └── chunk-vendors.fcfb82ac.css</span><br><span class="line">│   ├── favicon.ico</span><br><span class="line">│   ├── index.html                          ----- 英文版入口</span><br><span class="line">│   └── js                                  ----- 英文版脚本</span><br><span class="line">│       ├── app.e084e180.js</span><br><span class="line">│       ├── app.e084e180.js.map</span><br><span class="line">│       ├── chunk-vendors.6dfdaecd.js</span><br><span class="line">│       └── chunk-vendors.6dfdaecd.js.map</span><br><span class="line">├── favicon.ico</span><br><span class="line">├── index.html                              ----- 中文版入口</span><br><span class="line">└── js                                      ----- 中文版脚本</span><br><span class="line">    ├── app.89fdbe11.js</span><br><span class="line">    ├── app.89fdbe11.js.map</span><br><span class="line">    ├── chunk-vendors.66512729.js</span><br><span class="line">    └── chunk-vendors.66512729.js.map</span><br></pre></td></tr></table></figure>
<p>再用 <code>ng</code> 将请求转发到我们的 <code>dist</code> 目录，比如</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">location &#x2F;a &#123;</span><br><span class="line">    alias &#x2F;source&#x2F;vue-cli-test&#x2F;dist;</span><br><span class="line">    index index.html;</span><br><span class="line">    ....</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>则我们访问 <code>/a</code> 为中文版站点，<code>/a/en</code> 为英文版站点，大功告成</p>
<h2 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h2><p><code>vue-cli3</code> 的解决方案中有些细节不便列出，文中也只是提供一个简易的思路</p>
<p>本文所写均为自己的理解，如有错误还请斧正</p>
</div><div class="tags"><a href="/tags/js/"><i class="fa fa-tag"></i>js</a><a href="/tags/%E6%8A%80%E6%9C%AF%E9%92%BB%E7%A0%94/"><i class="fa fa-tag"></i>技术钻研</a><a href="/tags/%E5%89%8D%E7%AB%AF%E8%BF%9B%E9%98%B6/"><i class="fa fa-tag"></i>前端进阶</a><a href="/tags/%E5%89%8D%E7%AB%AF%E5%9B%BD%E9%99%85%E5%8C%96/"><i class="fa fa-tag"></i>前端国际化</a></div><div class="post-nav"><a class="pre" href="/2019/05/30/oldBlog/Vue-%E6%BA%90%E7%A0%81%E9%87%8C%E5%AD%A6%E5%88%B0%E4%BA%86%E4%BB%80%E4%B9%88-EventBus/">Vue 源码里学到了什么 - EventBus</a><a class="next" href="/2019/03/16/oldBlog/js-%E4%B8%AD%E7%9A%84%E9%80%97%E5%8F%B7%E8%BF%90%E7%AE%97%E7%AC%A6/">js 中的逗号运算符</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/%E6%9D%82%E8%B0%88/" style="font-size: 15px;">杂谈</a> <a href="/tags/HTTP/" style="font-size: 15px;">HTTP</a> <a href="/tags/HTTP-%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97/" style="font-size: 15px;">HTTP 权威指南</a> <a href="/tags/%E3%80%8A%E4%B8%8D%E5%9C%A8%E4%BB%96%E6%96%B9%E3%80%8B/" style="font-size: 15px;">《不在他方》</a> <a href="/tags/%E5%89%8D%E7%AB%AF/" style="font-size: 15px;">前端</a> <a href="/tags/js/" style="font-size: 15px;">js</a> <a href="/tags/You-Don-t-Know-Javascript/" style="font-size: 15px;">You Don't Know Javascript</a> <a href="/tags/%E3%80%8A%E5%A4%A9%E6%89%8D%E5%9C%A8%E5%B7%A6-%E7%96%AF%E5%AD%90%E5%9C%A8%E5%8F%B3%E3%80%8B/" style="font-size: 15px;">《天才在左 疯子在右》</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size: 15px;">数据结构</a> <a href="/tags/%E5%9F%BA%E6%9C%AC%E5%8A%9F/" style="font-size: 15px;">基本功</a> <a href="/tags/parser/" style="font-size: 15px;">parser</a> <a href="/tags/%E6%BA%90%E7%A0%81%E5%AD%A6%E4%B9%A0/" style="font-size: 15px;">源码学习</a> <a href="/tags/javascript/" style="font-size: 15px;">javascript</a> <a href="/tags/Acorn-js/" style="font-size: 15px;">Acorn.js</a> <a href="/tags/Babel/" style="font-size: 15px;">Babel</a> <a href="/tags/%E5%B7%A5%E7%A8%8B%E5%8C%96/" style="font-size: 15px;">工程化</a> <a href="/tags/leetcode/" style="font-size: 15px;">leetcode</a> <a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 15px;">算法</a> <a href="/tags/http/" style="font-size: 15px;">http</a> <a href="/tags/rfc/" style="font-size: 15px;">rfc</a> <a href="/tags/uri/" style="font-size: 15px;">uri</a> <a href="/tags/%E7%BC%96%E8%AF%91/" style="font-size: 15px;">编译</a> <a href="/tags/%E4%B8%A4%E5%91%A8%E8%87%AA%E5%88%B6%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/" style="font-size: 15px;">两周自制脚本语言</a> <a href="/tags/jquery/" style="font-size: 15px;">jquery</a> <a href="/tags/%E6%8A%80%E6%9C%AF%E9%92%BB%E7%A0%94/" style="font-size: 15px;">技术钻研</a> <a href="/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" style="font-size: 15px;">读书笔记</a> <a href="/tags/%E5%9F%BA%E7%A1%80/" style="font-size: 15px;">基础</a> <a href="/tags/%E5%89%8D%E7%AB%AF%E8%BF%9B%E9%98%B6/" style="font-size: 15px;">前端进阶</a> <a href="/tags/%E5%89%8D%E7%AB%AF%E5%9B%BD%E9%99%85%E5%8C%96/" style="font-size: 15px;">前端国际化</a> <a href="/tags/%E7%BD%91%E7%BB%9C/" style="font-size: 15px;">网络</a> <a href="/tags/typescript/" style="font-size: 15px;">typescript</a> <a href="/tags/Array-%E6%96%B9%E6%B3%95/" style="font-size: 15px;">Array 方法</a> <a href="/tags/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/" style="font-size: 15px;">前端基础</a> <a href="/tags/virtual-dom/" style="font-size: 15px;">virtual dom</a> <a href="/tags/%E9%98%9F%E5%88%97/" style="font-size: 15px;">队列</a> <a href="/tags/%E6%95%B0%E7%BB%84/" style="font-size: 15px;">数组</a></div></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2021 <a href="/." rel="nofollow">叁歌.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="/js/copycode.js" successtext="复制成功!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.css"></div></body></html>